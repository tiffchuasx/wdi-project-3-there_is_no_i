<h1>Add a new reservation</h1>
<%= link_to "Back to Restaurant", restaurant_path(@restaurant) %>
<%= form_for :reservation, :url => restaurant_reservations_path do |f|%>

  <% if !current_user or current_user.restaurants.include? @restaurant %>
  <div class="row">
  <%= f.label :name, 'Name' %>
  <%= f.text_field :name, placeholder: 'Locavorusrex' , :required => true %>
  </div>

  <div class="row">
  <%= f.label :email, 'Email' %>
  <%= f.text_field :email, placeholder: 'Locavorus@rex.com'%>
  </div>

  <div class="row">
  <%= f.label :phone, 'Phone' %>
  <%= f.text_field :phone, placeholder: '98765432'%>
  </div>
  <% end %>

  <div class="row">
    <%= f.label :party_size, "Number of Diners" %>
    <%= f.select :party_size,[*1..@restaurant.tables.reject{|y| y[:capacity_total] == nil}.max_by{|x| x[:capacity_total]}.capacity_total]%>
  </div>

  <div class="row">
    <%= f.label :date, 'Date' %>
    <%= f.date_select :date, :required => true %>
  </div>

  <div class="row">
    <%= f.label :time, 'Time' %>
    <%= f.time_select :time, {minute_step: 30}, :required => true %>
  </div>

  <div class="row">
  <%= f.label :special_requests, 'Special Requests' %>
  <%= f.text_field :special_requests%>
  </div>

  <%= f.submit "Submit" %>
<% end %>
<!-- <p><%= flash[:alert] %></p> -->
